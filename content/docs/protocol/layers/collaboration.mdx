---
title: Agent Collaboration
description: lightweight task execution without contract overhead
icon: Users
---

import { Callout } from "fumadocs-ui/components/callout";
import { Mermaid } from "@/components/mdx/mermaid";

The Agent Collaboration layer enables fast task execution between agents. 
Tasks can be initiated and completed with minimal overhead - designed for scalable agent systems.

## Collaboration Flow

<Mermaid
  chart={`
flowchart LR
    A[Task Request] --> B[Immediate Accept/Reject]
    B --> C[Task Execution]
    C --> D[Results Delivery]
`}
/>

**Key Simplifications**:

- **No contract negotiation** - immediate accept/reject
- **No formal agreements** - simple task tracking
- **Minimal state management** - 4 basic task states
- **Fast execution** - optimized for high throughput

## Direct Task Processing (No Negotiation)

H.I.V.E. eliminates complex negotiation flows by using immediate accept/reject responses.

### Streamlined Flow

1. **Request**: Agent sends task request with all parameters
2. **Immediate Response**: Provider immediately accepts or rejects (no negotiation)
3. **Execution**: If accepted, task starts immediately
4. **Result**: Results delivered upon completion

```json
// Task Request (all parameters included)
{
  "from": "hive:agentid:client123",
  "to": "hive:agentid:translator456",
  "type": "task_request",
  "data": {
    "task_id": "task-123",
    "capability": "text-translation",
    "text": "Hello world",
    "source_lang": "en",
    "target_lang": "es",
    "deadline": "2025-07-18T15:00:00Z"
  },
  "sig": "signature"
}

// Immediate Response
{
  "from": "hive:agentid:translator456",
  "to": "hive:agentid:client123",
  "type": "task_response",
  "data": {
    "task_id": "task-123",
    "status": "accepted"
  },
  "sig": "signature"
}
```

**Benefits**:

- **faster** task initiation
- **No negotiation overhead**
- **Simpler implementation**
- **Better scalability**

## Task Tracking (No Contracts)

**Tier 1 Approach**: Use simple task tracking.

### Basic Task Information

All you need to track:

```json
{
  "task_id": "task-123",
  "capability": "text-translation",
  "requester": "hive:agentid:client123",
  "provider": "hive:agentid:translator456",
  "status": "in_progress",
  "created": "2025-07-18T14:30:00Z",
  "deadline": "2025-07-18T15:00:00Z"
}
```

**Benefits**:

- **No contract negotiation** required
- **Immediate task execution**
- **Simple state management**
- **Faster processing** than contract-based approaches

### When to Use Contracts (Tier 2+)

Only upgrade to formal contracts when you need:

- Multi-party task coordination
- Payment or SLA guarantees
- Complex dispute resolution
- Regulatory compliance requirements

<Callout type="info">
  **Practical Rule**: Most agent interactions don't need formal contracts. Start
  simple with task tracking and upgrade only when specific requirements demand
  it.
</Callout>

## Task Execution

### 4 Essential Task States

<Mermaid
  chart={`
stateDiagram-v2
    [*] --> REQUESTED
    REQUESTED --> ACCEPTED: Provider accepts
    REQUESTED --> REJECTED: Provider rejects  
    ACCEPTED --> COMPLETED: Work finished
    ACCEPTED --> FAILED: Error occurs
    COMPLETED --> [*]
    FAILED --> [*]
    REJECTED --> [*]
`}
/>

**States**:

- **REQUESTED**: Task sent to provider
- **ACCEPTED**: Provider will do the task
- **COMPLETED**: Task finished successfully
- **FAILED**: Task couldn't be completed

### Optional Progress Updates (Tier 2+)

For long-running tasks, progress updates:

```json
{
  "from": "hive:agentid:provider",
  "to": "hive:agentid:requester",
  "type": "task_update",
  "data": {
    "task_id": "task-123",
    "progress": 0.75,
    "message": "Translation 75% complete"
  },
  "sig": "signature"
}
```

## Results Delivery

### Basic Result Message

```json
{
  "from": "hive:agentid:provider",
  "to": "hive:agentid:requester",
  "type": "task_result",
  "data": {
    "task_id": "task-123",
    "status": "completed",
    "result": {
      "translated_text": "Hola mundo"
    }
  },
  "sig": "signature"
}
```

### Large Results (Tier 2+)

For large results, use simple file references:

```json
{
  "from": "hive:agentid:provider",
  "to": "hive:agentid:requester",
  "type": "task_result",
  "data": {
    "task_id": "task-123",
    "status": "completed",
    "result_url": "https://storage.example.com/results/task-123.zip",
    "expires": "2025-07-19T15:00:00Z"
  },
  "sig": "signature"
}
```

## Error Handling

### Basic Error Response

```json
{
  "from": "hive:agentid:provider",
  "to": "hive:agentid:requester",
  "type": "task_error",
  "data": {
    "task_id": "task-123",
    "error": "resource_unavailable",
    "message": "Translation service temporarily down",
    "retry": true
  },
  "sig": "signature"
}
```

**Common error codes**:

- `capability_not_found` - Agent doesn't have this capability
- `invalid_parameters` - Wrong or missing parameters
- `resource_unavailable` - Service temporarily down
- `processing_failed` - Error during execution

## Implementation (Tier 1)

**Required for basic collaboration**:

- [ ] Handle `task_request` messages
- [ ] Send `task_response` (accept/reject)
- [ ] Process tasks and send `task_result`
- [ ] Handle errors with `task_error`
- [ ] Basic task state tracking

**Optional (Tier 2+)**:

- [ ] Progress updates for long tasks
- [ ] Formal task agreements
- [ ] Advanced error handling
- [ ] Result verification

<Callout type="info">
  **Start Simple**: Most agents only need the 4 basic message types for task
  collaboration. Add complexity only when your specific use case requires it.
</Callout>
