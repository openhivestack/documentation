---
title: Discovery & Identity
description: How agents identify themselves and discover each other
icon: Search
---

import { Callout } from "fumadocs-ui/components/callout";
import { Mermaid } from "@/components/mdx/mermaid";

The Discovery & Identity layer of the H.I.V.E. Protocol enables agents to establish their identity and discover other
agents based on capabilities and requirements.

## Layer Overview

<Mermaid
  chart={`
flowchart LR
    A[Agent Identity] --> B[Key Management]
    B --> C[Discovery Mechanisms]
    C --> D[Capability Advertisement]
`}
/>

## Agent Identity

In the H.I.V.E. Protocol, each agent has a unique identity established through cryptographic keys.

### Identity Structure

An agent's identity consists of:

- **Decentralized Identifier (DID)**: A globally unique identifier conforming to the W3C DID standard
- **DID Document**: Contains verification methods, services, and other DID-related information
- **Metadata**: Optional information about the agent's purpose, owner, etc.

```json
{
  "did": "did:hive:123456789abcdefghi",
  "didDocument": {
    "@context": ["https://www.w3.org/ns/did/v1"],
    "id": "did:hive:123456789abcdefghi",
    "verificationMethod": [{
      "id": "did:hive:123456789abcdefghi#keys-1",
      "type": "Ed25519VerificationKey2020",
      "controller": "did:hive:123456789abcdefghi",
      "publicKeyMultibase": "zH3C2AVvLMv6gmMNam3uVAjZpfkcJCwDwnZn6z3wXmqPV"
    }],
    "authentication": ["did:hive:123456789abcdefghi#keys-1"],
    "assertionMethod": ["did:hive:123456789abcdefghi#keys-1"],
    "service": [{
      "id": "did:hive:123456789abcdefghi#agent",
      "type": "HiveAgent",
      "serviceEndpoint": "https://agent.example.com/api"
    }]
  },
  "metadata": {
    "name": "Translation Agent",
    "description": "Provides language translation services",
    "owner": "company-xyz",
    "created": "2025-01-15T08:30:00Z"
  }
}
```

### Verification Methods

H.I.V.E. supports multiple verification method types in accordance with the W3C DID specification:

1. **Ed25519VerificationKey2020**: Modern elliptic curve cryptography offering superior performance and security
2. **JsonWebKey2020**: JSON Web Key format supporting various algorithms including RSA and ECDSA
3. **X25519KeyAgreementKey2020**: Specialized for encrypted communications

All agent communications are signed using the appropriate verification method from the DID Document, ensuring
message authenticity while supporting a wider range of cryptographic algorithms and standards.

<Callout type="warning">
  Private keys must be securely stored and never shared. Compromise of a private key allows impersonation of the agent.
</Callout>

## Agent Discovery

The H.I.V.E. Protocol provides multiple mechanisms for agents to discover each other.

### Registry-Based Discovery

The most common approach uses a central or federated registry service:

1. **Registration**: Agents register their identity and capabilities with the registry
2. **Lookup**: Agents query the registry to find others with specific capabilities
3. **Connection**: Once discovered, agents connect directly to each other

```http
# Registration Example
POST /registry/agents HTTP/1.1
Host: registry.example.com
Content-Type: application/json

{
  "did": "did:hive:123456789abcdefghi",
  "didDocument": {
    "@context": ["https://www.w3.org/ns/did/v1"],
    "id": "did:hive:123456789abcdefghi",
    "verificationMethod": [{
      "id": "did:hive:123456789abcdefghi#keys-1",
      "type": "Ed25519VerificationKey2020",
      "controller": "did:hive:123456789abcdefghi",
      "publicKeyMultibase": "zH3C2AVvLMv6gmMNam3uVAjZpfkcJCwDwnZn6z3wXmqPV"
    }],
    "authentication": ["did:hive:123456789abcdefghi#keys-1"],
    "service": [{
      "id": "did:hive:123456789abcdefghi#agent",
      "type": "HiveAgent",
      "serviceEndpoint": "https://agent-abc123.example.com/api"
    },{
      "id": "did:hive:123456789abcdefghi#websocket",
      "type": "HiveWebSocket",
      "serviceEndpoint": "wss://agent-abc123.example.com/ws"
    }]
  },
  "capabilities": [
    {
      "id": "text-translation",
      "supportedLanguages": ["en", "es", "fr", "de"],
      "maxTextLength": 10000
    }
  ]
}
```

```http
# Lookup Example
GET /registry/agents?capability=text-translation&language=es HTTP/1.1
Host: registry.example.com
Accept: application/json

# Response
{
  "agents": [
    {
      "did": "did:hive:123456789abcdefghi",
      "didDocument": { /* DID Document */ },
      "capabilities": [{ /* capability details */ }]
    },
    {
      "did": "did:hive:987654321jihgfedcba",
      "didDocument": { /* DID Document */ },
      "capabilities": [{ /* capability details */ }]
    }
  ]
}
```

### Direct Discovery

For known agents, direct discovery bypasses the registry:

1. **Address Knowledge**: The agent already knows the endpoint of another agent
2. **Direct Connection**: The agent connects directly to the known endpoint
3. **Capability Query**: The agent can request capability details directly

### Decentralized Discovery

For decentralized deployments, H.I.V.E. supports peer-to-peer discovery:

1. **Broadcast**: Agents broadcast discovery messages to the network
2. **Response**: Agents with matching capabilities respond directly
3. **Connection**: Agents establish direct connections based on responses

## Capability Advertisement

Agents advertise their capabilities to enable efficient discovery and collaboration.

### Capability Format

Capabilities are described in a standardized JSON format:

```json
{
  "capabilities": [
    {
      "id": "text-translation",
      "version": "1.0",
      "description": "Translates text between languages",
      "supportedLanguages": ["en", "es", "fr", "de", "zh", "ja"],
      "parameters": {
        "sourceLanguage": {
          "type": "string",
          "required": true,
          "description": "Source language code"
        },
        "targetLanguage": {
          "type": "string",
          "required": true,
          "description": "Target language code"
        },
        "text": {
          "type": "string",
          "required": true,
          "maxLength": 10000,
          "description": "Text to translate"
        },
        "preserveFormatting": {
          "type": "boolean",
          "required": false,
          "default": true,
          "description": "Whether to preserve formatting"
        }
      },
      "returns": {
        "translatedText": {
          "type": "string",
          "description": "The translated text"
        },
        "confidence": {
          "type": "number",
          "description": "Confidence score between 0 and 1"
        }
      },
      "performanceMetrics": {
        "averageResponseTime": 1.2,
        "throughput": "5000 chars/second"
      }
    }
  ]
}
```

### Capability Updates

Agents should update their capability advertisements when changes occur:

- New capabilities are added
- Existing capabilities are modified or removed
- Performance characteristics change significantly

<Callout type="info">
  See the [Capability Advertisement](/docs/protocol/structure/capability-advertisement) page for detailed specifications.
</Callout>

## Implementation Considerations

When implementing the Discovery & Identity layer, developers should consider:

- Key rotation policies for long-lived agents
- Registry redundancy for high availability
- Cache strategies for frequently used discovery results
- Rate limiting for discovery requests
- Privacy implications of capability advertisements

<Callout type="warning">
  Registry services should implement proper authentication and authorization to prevent unauthorized capability
    advertisements and discovery data tampering.
</Callout>
